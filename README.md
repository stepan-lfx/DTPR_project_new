# DTPR_project

Для работы ПО необходима установленная библиотека openCV и прописан путь к файлам библиотеки (OPENCV_DIR)

Программа включает в себя 2 основных модуля:
1. INeuralNetwork.h - класс, обеспечивающий прием кадров видеопотока, обнаружение объектов на видео с помощью методов оптического потока, предсказание траектории объектов с помощью линейной экстраполяции по последовательности кадров, распознавание типа объекта с помощью нейронной сети. Принцип работы класса основан на создании экземпляра класса с помощью конструктора

INeuralNetwork(std::string netConfigPath, std::string netWeightsPath = "", bool isSeparateWeights = false, uint previousFCount = 6, uint extrapolationFCount = 6, uint minObjSize = 10),

в который передается следующий список аргументов:
- netConfigPath - путь к файлу, содержащему конфигурацию нейронной сети;
- netWeightsPath - путь к файлу, содержащему веса узлов нейронной сети (опционально);
- isSeparateWeights - флаг для определения, содержатся ли веса и конфигурация сети в разных файлах или в одном;
- previousFCount - число кадров, по которым строится линейная экстраполяция;
- extrapolationFCount - число кадров, на которое строится прогноз положения объекта;
- minObjSize - минимальный линейный размер движущихся объектов для объединения сонаправленных треков, в пикселях.


2. DTPR_program.cpp - основной исполняемый файл, содержит код для загрузки аргументов программы, создания экземпляра класса и запуска процесса распознавания циклично в каждом кадре видеофайла, переданного в качестве одного из аргументов.

В актуальной реализации программа запускается со следующим списком аргументов:
DTPR_program fPathIn fPathOut fPathNetCfg fPathNetWeights separateNetFiles size_min previousFramesCount extraFramesCount
- fPathIn – имя (путь) к файлу исходного видео в формате mkv/mp4/avi;
- fPathOut – имя (путь) к файлу видео с отображением траекторий найденных объектов в формате mkv/mp4 (в данный момент не используется, сохранен в целях тестирования);
- fPathNetCfg - путь к файлу, содержащему конфигурацию нейронной сети;
- fPathNetWeights - путь к файлу, содержащему веса узлов нейронной сети (опционально);
- separateNetFiles - флаг для определения, содержатся ли веса и конфигурация сети в разных файлах или в одном (значение больше 0 - true, 0 и меньше - false);
- size_min – минимальный линейный размер движущихся объектов для объединения сонаправленных треков, в пикселях;
- previousFramesCount - число кадров, по которым строится линейная экстраполяция;
- extraFramesCount - число кадров, на которое строится прогноз положения объекта.

Пример передачи аргументов:
DTPR_program in_drone.avi out.avi yolov4.cfg yolov4.weights 1 15 6 6
